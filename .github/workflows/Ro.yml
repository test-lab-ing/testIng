name: Auto PR Robot

on:
  push:
    branches: [ "add-ing2" ] # หุ่นยนต์จะตื่นมาทำงานเฉพาะตอนเรา Push เข้ากิ่งนี้

jobs:
  open-pr:
    runs-on: ubuntu-latest
    # สำคัญ: ต้องให้สิทธิ์หุ่นยนต์ในการเขียน PR ด้วย
    permissions:
      contents: write
      pull-requests: write

    steps:
      - name: 1. เตรียมโค้ด
        uses: actions/checkout@v4

      - name: 2. สั่งหุ่นยนต์เปิด PR อัตโนมัติ
        uses: repo-sync/pull-request@v2
        with:
          source_branch: "add-ing2"    # กิ่งต้นทาง
          destination_branch: "main"  # กิ่งปลายทางที่เราอยากรวม
          pr_title: "หุ่นยนต์ส่งงานครับ: ${{ github.event.head_commit.message }}"
          pr_body: "PR นี้ถูกสร้างขึ้นโดยอัตโนมัติจากระบบ GitHub Actions"
          github_token: ${{ secrets.GITHUB_TOKEN }} # กุญแจสำคัญที่ให้หุ่นยนต์ทำงานแทนเรา